{% extends 'admin/base_admin.html' %}
{% load static %}
{% load jformat %}
{% block head %}
    <style>
        /* Table Styles */

    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

{% endblock %}
{% block body %}
    <section class="content-header">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
            downlaod
        </button>

    </section>
    <section class="content">
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th scope="col">Created At</th>
                    <th scope="col">Device</th>
                    <th scope="col">Latitude</th>
                    <th scope="col">Longitude</th>
                    <th scope="col">Humidity</th>
                    <th scope="col">Temperature</th>
                    <th scope="col">CO</th>
                    <th scope="col">H2</th>
                    <th scope="col">LPG</th>
                    <th scope="col">CH4</th>
                    <th scope="col"> NOx</th>
                    <th scope="col"> CL2</th>
                    <th scope="col">Alchohol</th>
                    <th scope="col"> CO2</th>
                    <th scope="col">Toluen</th>
                    <th scope="col">NH4</th>
                    <th scope="col">Aceton</th>
                    <th scope="col">PM1_0</th>
                    <th scope="col">PM2_5</th>
                    <th scope="col">PM10</th>
                </tr>
                </thead>
                <tbody>
                {% for collector in data_collectors %}
                    <tr>
                        <td>{{ collector.created_at|jformat:"%A" }}<br>{{ collector.created_at|jformat:"%d %B" }}<br>{{ collector.created_at|jformat:"%H:%M" }}
                        </td>
                        <td>{{ collector.device.name }}</td>
                        <td>{{ collector.Lat }}</td>
                        <td>{{ collector.Lng }}</td>
                        <td>{{ collector.Humidity }}</td>
                        <td>{{ collector.Temperature }}</td>
                        <td>{{ collector.CO }}</td>
                        <td>{{ collector.H2 }}</td>
                        <td>{{ collector.LPG }}</td>
                        <td>{{ collector.CH4 }}</td>
                        <td>{{ collector.NOx }}</td>
                        <td>{{ collector.CL2 }}</td>
                        <td>{{ collector.Alchohol }}</td>
                        <td>{{ collector.CO2 }}</td>
                        <td>{{ collector.Toluen }}</td>
                        <td>{{ collector.NH4 }}</td>
                        <td>{{ collector.Aceton }}</td>
                        <td>{{ collector.PM1_0 }}</td>
                        <td>{{ collector.PM2_5 }}</td>
                        <td>{{ collector.PM10 }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="pagination">
        <span class="step-links">
{#                    {% if page_obj.has_previous %}#}
                        <a  {% if not page_obj.has_previous %}
                            class="btn btn-primary disabled"
                        {% else %}
                            href="?page=1"
                            class="btn btn-primary"
                        {% endif %}>first</a>
                        <a
                                {% if not page_obj.has_previous %}
                                    class="btn btn-primary disabled"
                                {% else %}
                                    class="btn btn-primary"
                                    href="?page={{ page_obj.previous_page_number }}"
                                {% endif %}>previous</a>
{#                    {% endif %}#}

            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
            </span>
{#            {% if page_obj.has_next %}#}
                <a
                        {% if page_obj.has_next %}
                            class="btn btn-primary"
                            href="?page={{ page_obj.next_page_number }}"
                        {% else %}
                            class="btn btn-primary disabled"
                        {% endif %}>
                    next
                </a>
                <a {% if page_obj.has_next %}
                    class="btn btn-primary"
                    href="?page={{ page_obj.paginator.num_pages }}"
                {% else %}
                    class="btn btn-primary disabled"
                {% endif %}
                >last</a>
{#            {% endif %}#}


        </span>
        </div>
        {#        <ul>#}
        {#            <!-- Iterate over object_list -->#}
        {#            {% for object in object_list %}#}
        {#                <!-- Display Objects -->#}
        {#                <li>{{ object.title }}</li>#}
        {#                <li>{{ object.description }}</li>#}
        {##}
        {#                <hr/>#}
        {#                <!-- If object_list is empty  -->#}
        {#            {% empty %}#}
        {#                <li>No objects yet.</li>#}
        {#            {% endfor %}#}
        {#        </ul>#}

    </section>
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="download_form" action="" method="POST">
                        {% csrf_token %}
                        {{ form.as_p }}
                        {#                        <button type="submit" class="btn btn-primary">save</button>#}
                    </form>

                </div>
                <div class="modal-footer">
                    {#                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>#}
                    <button type="button" onclick="document.getElementById('download_form').submit();"
                            class="btn btn-success">
                        download
                    </button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
{% block script %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

{% endblock %}